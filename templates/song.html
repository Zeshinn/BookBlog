<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <title>Бакърика - Създаване на песен</title>
</head>
<body class="bg-stone-600">
    <div class="flex justify-center">
        <h1 class="inline-block text-center font-serif text-stone-400 text-5xl text-shadow-lg text-shadow-teal-950 transition-all duration-300 ease-in-out hover:text-shadow-rose-950">
            Бакърика
        </h1>
    </div>
    <div class="flex justify-center mt-3">
        <p class="inline-block font-serif text-xl text-stone-400 px-3 text-center">Тук се слага яката музика.</p>
    </div>
    <div class="mt-6 w-full px-3">
        <div class="flex justify-center mt-2 w-full px-3">
            <div class="bg-stone-800 w-xl border-1 border-solid text-stone-400 p-3 overflow-auto max-h-90">
                <form action="/song" id="song_form" method="POST" enctype="multipart/form-data">

                    <!-- Select menu -->
                    <div class="flex justify-center mb-4">
                        <label for="mode" class="mr-2">Начин:</label>
                        <select id="mode" name="mode" class="border-1 p-1 focus:outline-none">
                            <option value="spotify" selected>Spotify</option>
                            <option value="manual">Ръчно</option>
                        </select>
                    </div>

                    <!-- Spotify input -->
                    <div id="spotify-fields" class="flex flex-col items-center">
                        <input class="border-1 p-1 focus:outline-none w-full" type="text" name="spotify_url" id="spotify_url" placeholder="Spotify линк">
                    </div>

                    <!-- Manual entry -->
                    <div id="manual-fields" class="hidden">
                        <div class="flex justify-center mt-3">
                            <input class="border-1 p-1 focus:outline-none" type="text" name="title" id="title" placeholder="Име на песента">
                        </div>
                        <div class="flex justify-center mt-3">
                            <input class="border-1 p-1 focus:outline-none" type="text" name="text" id="text" placeholder="Име на изпълнителя">
                        </div>
                        <div class="flex justify-center mt-3">
                            <label for="image">Избери снимка за песента</label>
                        </div>
                        <div class="flex justify-center mt-1">
                            <input class="border-1 p-1 focus:outline-none" type="file" name="image" id="image" placeholder="Снимка на албум">
                        </div>
                    </div>

                    <!-- Always required -->
                    <div class="flex justify-center mt-5">
                        <input required class="border-1 p-1 focus:outline-none" type="text" name="username" id="username" placeholder="Име">
                    </div>
                    <div class="flex justify-center mt-1">
                        <input required class="border-1 p-1 focus:outline-none" type="password" name="password" id="password" placeholder="Паролка батио">
                    </div>

                    <div class="flex justify-center mt-3">
                        <input class="border-1 p-1 focus:outline-none text-stone-800 bg-stone-400 p-1 px-2 hover:cursor-pointer rounded-sm" type="submit" value="Запиши">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const modeSelect = document.getElementById("mode");
        const spotifyFields = document.getElementById("spotify-fields");
        const manualFields = document.getElementById("manual-fields");
        const spotifyInput = document.getElementById("spotify_url");
        const manualInputs = ["title", "text", "image"].map(id => document.getElementById(id));

        function updateMode() {
            if (modeSelect.value === "spotify") {
                spotifyFields.classList.remove("hidden");
                manualFields.classList.add("hidden");

                spotifyInput.required = true;
                manualInputs.forEach(el => el.required = false);
            } else {
                spotifyFields.classList.add("hidden");
                manualFields.classList.remove("hidden");

                spotifyInput.required = false;
                manualInputs.forEach(el => el.required = true);
            }
        }

        // Initialize
        modeSelect.addEventListener("change", updateMode);
        updateMode();
    </script>
</body>
</html>
